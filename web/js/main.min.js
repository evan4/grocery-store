"use strict";function removeUtemFromTable(t,e){var a,o=t.cart,n=t.cartTemplate;console.log(o),console.log(e),0<o["cart-sum"]?(a=$(".total-list"),$(".timetable_sub tbody tr").eq(e).fadeOut("slow").remove(),a.find("li").last().find("span").text(o["cart-sum"]),a.find("li").eq(e).fadeOut("slow").remove(),$(".overlay").fadeOut()):($(".checkout-right").fadeOut(),$(".checkout-left").fadeOut(),$(".privacy.about").append(n))}function updateCartDialog(t,e){var a=$("#w0");a.find(".modal-body").html(t),e&&a.modal();var o=$("#cart-sum").text(),n=o||"$0";$(".cart-sum").text(n)}function deleteItem(t){return new Promise(function(e,a){$.ajax({url:"cart/remove-item",data:{id:t}}).done(function(t){t||alert("Произошла ошибка. Попробуйте еще раз"),updateCartDialog(t.cartTemplate),e(t)}).fail(function(t){a(t)})})}function changeCartQuantity(t,a,r){return new Promise(function(l,e){$.ajax({url:"cart/change-cart",data:{id:t,qty:a}}).done(function(t){t||alert("Произошла ошибка. Попробуйте еще раз");var e=t.cart,a=t.cartTemplate,o=t.product,n=o.price*o.qty,i=$(".total-list");i.find("li").eq(r).find("span").text("$".concat(n)),i.find("li").last().find("span").text("$".concat(e["cart-sum"])),updateCartDialog(a),l(e)}).fail(function(t){e(t)})})}jQuery(document).ready(function(l){l(".scroll").click(function(t){t.preventDefault(),l("html,body").animate({scrollTop:l(this.hash).offset().top},1e3)});var e=l(".agileits_header").offset().top;l(window).scroll(function(){var t=l(window).scrollTop();e<=t?l(".agileits_header").addClass("fixed"):l(".agileits_header").removeClass("fixed")}),l(".dropdown").hover(function(){l(".dropdown-menu",this).stop(!0,!0).slideDown("fast"),l(this).toggleClass("open")},function(){l(".dropdown-menu",this).stop(!0,!0).slideUp("fast"),l(this).toggleClass("open")}),l().UItoTop({easingType:"easeOutQuart"}),l(".flexslider").flexslider({animation:"slide",start:function(){l("body").removeClass("loading")}}),l("#example").okzoom({width:150,height:150,border:"1px solid black",shadow:"0 0 5px #000"}),l(".add-to-cart").on("click",function(t){t.preventDefault();var e=+l(this).data("id");0<e&&l.ajax({url:"cart/add",data:{id:e}}).done(function(t){t||alert("Произошла ошибка. Попробуйте еще раз"),updateCartDialog(t,!0)}).fail(function(t){console.log({error:"Произошла ошибка. Попробуйте еще раз"})})}),l("#w0").find(".modal-body").on("click",".del-item",function(){var t=+l(this).data("id"),e=+l(this).closest("tr").index();0<t&&deleteItem(t).then(function(t){l(".cart-table").length&&(console.log(t),removeUtemFromTable(t,e))})}),l("#clearCart").on("click",function(t){t.preventDefault(),l.ajax({url:"cart/clear-cart"}).done(function(t){updateCartDialog(""),l(".cart-table").length&&removeUtemFromTable({cart:{},cartTemplate:t})}).fail(function(t){console.log({error:"Произошла ошибка. Попробуйте еще раз"})})}),l(".value-plus, .value-minus").on("click",function(){var t=l(this).closest("tr"),e=t.index(),a=+t.data("id"),o=l(this).parent().find(".value"),n=l(this).hasClass("value-plus")?1:-1,i=parseInt(o.text(),10)+n;0<i&&changeCartQuantity(a,n,e).then(function(t){o.text(i)})}),l(".removeItem").on("click",function(t){t.preventDefault();var e=l(this).closest("tr"),a=+e.data("id"),o=e.index();0<a&&(l(".overlay").fadeIn(),deleteItem(a).then(function(t){removeUtemFromTable(t,o)}).catch(function(t){console.log(t),l(".overlay").fadeOut()}))})});
//# sourceMappingURL=main.min.js.map