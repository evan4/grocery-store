"use strict";function updateCartDialog(t,e){var a=$("#w0");a.find(".modal-body").html(t),e&&a.modal();var o=$("#cart-sum").text(),i=o||"$0";$(".cart-sum").text(i)}function deleteItem(o){return new Promise(function(e,a){var t={id:o};$.ajax({url:"cart/remove-item",data:t}).done(function(t){t||alert("Произошла ошибка. Попробуйте еще раз"),updateCartDialog(t),e(t)}).fail(function(t){a(t)})})}jQuery(document).ready(function(n){n(".scroll").click(function(t){t.preventDefault(),n("html,body").animate({scrollTop:n(this.hash).offset().top},1e3)});var e=n(".agileits_header").offset().top;n(window).scroll(function(){var t=n(window).scrollTop();e<=t?n(".agileits_header").addClass("fixed"):n(".agileits_header").removeClass("fixed")}),n(".dropdown").hover(function(){n(".dropdown-menu",this).stop(!0,!0).slideDown("fast"),n(this).toggleClass("open")},function(){n(".dropdown-menu",this).stop(!0,!0).slideUp("fast"),n(this).toggleClass("open")}),n().UItoTop({easingType:"easeOutQuart"}),n(".flexslider").flexslider({animation:"slide",start:function(){n("body").removeClass("loading")}}),n("#example").okzoom({width:150,height:150,border:"1px solid black",shadow:"0 0 5px #000"}),n(".add-to-cart").on("click",function(t){t.preventDefault();var e,a=+n(this).data("id");0<a&&(e={id:a},n.ajax({url:"cart/add",data:e}).done(function(t){t||alert("Произошла ошибка. Попробуйте еще раз"),updateCartDialog(t,!0)}).fail(function(t){console.log({error:"Произошла ошибка. Попробуйте еще раз"})}))}),n("#w0").find(".modal-body").on("click",".del-item",function(){var t=+n(this).data("id");0<t&&deleteItem(t)}),n("#clearCart").on("click",function(t){t.preventDefault(),n.ajax({url:"cart/clear-cart"}).done(function(t){updateCartDialog("")}).fail(function(t){console.log({error:"Произошла ошибка. Попробуйте еще раз"})})}),n(".value-plus").on("click",function(){n(this).closest("tr").index();var t=n(this).parent().find(".value"),e=parseInt(t.text(),10)+1;t.text(e)}),n(".value-minus").on("click",function(){n(this).closest("tr").index();var t=n(this).parent().find(".value"),e=parseInt(t.text(),10)-1;1<=e&&t.text(e)}),n(".removeItem").on("click",function(t){t.preventDefault();var i=n(this).closest("tr"),e=+i.data("id");0<e&&(n(".overlay").fadeIn(),deleteItem(e).then(function(t){var e=n(".total-list"),a=i.index(),o=0;-1!==t.indexOf('<td id="cart-sum">')&&(o=t.split('<td id="cart-sum">'),console.log(o[1].charAt(0)),o=o[1].split("<")[0]),i.fadeOut("slow").remove(),e.find("li").last().find("span").text(o),e.find("li").eq(a).fadeOut("slow").remove(),n(".overlay").fadeOut()}).catch(function(t){console.log(t),n(".overlay").fadeOut()}))})});
//# sourceMappingURL=main.min.js.map