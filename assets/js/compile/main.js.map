{"version":3,"sources":["../es6/main.js"],"names":["jQuery","document","ready","$","click","event","preventDefault","animate","scrollTop","hash","offset","top","navoffeset","window","scroll","scrollpos","addClass","removeClass","hover","stop","slideDown","toggleClass","slideUp","UItoTop","easingType","flexslider","animation","start","slider","okzoom","width","height","border","shadow","on","e","id","data","ajax","url","done","res","alert","updateCartDialog","fail","error","console","log","$modal","find","deleteItem","$tr","closest","index","divUpd","parent","newVal","parseInt","text","fadeIn","then","$list","indexOf","split","charAt","fadeOut","remove","last","eq","cart","open","html","modal","$sum","$cartSum","Promise","resolve","reject"],"mappings":"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","sourcesContent":["jQuery(document).ready(function($) {\n\n    $(\".scroll\").click(function(event){\n        event.preventDefault();\n        $('html,body').animate({scrollTop:$(this.hash).offset().top},1000);\n    });\n\n    const navoffeset=$(\".agileits_header\").offset().top;\n    $(window).scroll(function(){\n        var scrollpos=$(window).scrollTop();\n        if(scrollpos >=navoffeset){\n            $(\".agileits_header\").addClass(\"fixed\");\n        }else{\n            $(\".agileits_header\").removeClass(\"fixed\");\n        }\n    });\n\n    $(\".dropdown\").hover(\n        function() {\n            $('.dropdown-menu', this).stop( true, true ).slideDown(\"fast\");\n            $(this).toggleClass('open');\n        },\n        function() {\n            $('.dropdown-menu', this).stop( true, true ).slideUp(\"fast\");\n            $(this).toggleClass('open');\n        }\n    );\n\n    $().UItoTop({ easingType: 'easeOutQuart' });\n\n    $('.flexslider').flexslider({\n        animation: \"slide\",\n        start: function(slider){\n            $('body').removeClass('loading');\n        }\n    });\n\n    $('#example').okzoom({\n        width: 150,\n        height: 150,\n        border: \"1px solid black\",\n        shadow: \"0 0 5px #000\"\n    });\n\n    $('.add-to-cart').on('click', function(e) {\n        e.preventDefault();\n        const id = +$(this).data('id');\n        \n        if(id > 0) {\n           const data = {\n                id\n            };\n\n            $.ajax({\n                url: 'cart/add',\n                data\n            })\n            .done(function (res) {\n                if(!res) alert('Произошла ошибка. Попробуйте еще раз');\n\n                updateCartDialog(res, true);\n            })\n            .fail(function (error) {\n                let res = {\n                    'error': 'Произошла ошибка. Попробуйте еще раз'\n                }\n                console.log(res);\n            });\n        }\n    });\n\n    const $modal = $('#w0');\n    $modal.find('.modal-body').on('click', '.del-item', function () {\n        const id = +$(this).data('id');\n\n        if(id > 0) {\n            deleteItem(id);\n         }\n    })\n    \n    $('#clearCart').on('click', function (e) {\n        e.preventDefault();\n        $.ajax({\n            url: 'cart/clear-cart'\n        })\n        .done(function (res) {\n            updateCartDialog('')\n        })\n        .fail(function (error) {\n            let res = {\n                'error': 'Произошла ошибка. Попробуйте еще раз'\n            }\n            console.log(res);\n        });\n    });\n\n    $('.value-plus').on('click', function(){\n        const $tr = $(this).closest(\"tr\");\n        const index = $tr.index();\n\n        const divUpd = $(this).parent().find('.value');\n        const newVal = parseInt(divUpd.text(), 10)+1;\n        divUpd.text(newVal);\n    });\n\n    $('.value-minus').on('click', function(){\n        const $tr = $(this).closest(\"tr\");\n        const index = $tr.index();\n\n        const divUpd = $(this).parent().find('.value');\n        const newVal = parseInt(divUpd.text(), 10)-1;\n\n        if(newVal>=1) {\n            \n            divUpd.text(newVal);\n        }\n    });\n\n    $('.removeItem').on('click', function(e){\n        e.preventDefault();\n\n        const $tr = $(this).closest(\"tr\");\n        const id = +$tr.data('id');\n\n        if(id > 0) {\n            $('.overlay').fadeIn();\n            deleteItem(id)\n            .then(data => {\n                const $list = $('.total-list');\n                const index = $tr.index();\n                let res = 0;\n\n                if(data.indexOf(\"<td id=\\\"cart-sum\\\">\") !== -1){\n                    res = data.split(\"<td id=\\\"cart-sum\\\">\");\n                    console.log(res[1].charAt(0));\n\n                    res = res[1].split(\"<\")[0];\n                }\n               \n                $tr.fadeOut('slow').remove();\n                \n                $list.find('li')\n                .last().find('span').text(res);\n\n                $list.find('li').eq(index)\n                .fadeOut('slow').remove()\n\n                $('.overlay').fadeOut();\n\n            })\n            .catch(error => {\n                console.log(error)\n                $('.overlay').fadeOut();\n            })\n\n        }\n    });\n\n});\n\nfunction updateCartDialog(cart, open) {\n\n    const $modal = $('#w0');\n    $modal.find('.modal-body').html(cart);\n    if(open){\n        $modal.modal();\n    }\n    \n    const $sum = $('#cart-sum').text();\n    const $cartSum = $sum ? $sum : '$0';\n\n    $('.cart-sum').text($cartSum);\n}\n\nfunction deleteItem(id) {\n    return new Promise((resolve, reject) => {\n        const data = {\n            id\n        };\n\n        $.ajax({\n            url: 'cart/remove-item',\n            data\n        })\n        .done(function (res) {\n            if(!res) alert('Произошла ошибка. Попробуйте еще раз');\n\n            updateCartDialog(res);\n            resolve(res)\n        })\n        .fail(function (error) {\n            reject(error)\n        });\n    });\n}\n"],"file":"main.js"}